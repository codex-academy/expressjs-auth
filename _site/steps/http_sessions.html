<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Authentication & Authorization</title>
  <meta name="description" content="">

  <link rel="stylesheet" href="//static.projectcodex.co/css/main.css">
  <link rel="canonical" href="/steps/http_sessions.html">

  <script>
  WebFontConfig = {
    google: {
      families: ['Source Sans Pro:400,700']
    }
  };
  </script>
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js" async></script>
</head>


  <body>

    <header class="site-header">
  <nav class="site-nav">
    <a href="/" class="logo"><img src="/img/codex-logo.png" alt="codeX"></a>
    
    <a href="#menu" class="menu">Menu &darr;</a>
    

    
      
      <h2>Authentication & Authorization</h2>
      
    
  </nav>
</header>


    <main>
      <h1 id="http-sessions">HTTP Sessions</h1>

<p>HTTP is a stateless protocol, to store user session information one needs a way of managing state when using it. HTTP Sessions are used for that.</p>

<p>HTTP sessions use a combination of client side and server side storage. It use <a href="https://www.nczonline.net/blog/2009/05/05/http-cookies-explained/">Cookies</a> to store small pieces of information on a userâ€™s PC. Server side the session data are stored in files on disk or in a database.</p>

<p>Cookies contains an token/values that are used associate the HTTP request data stored on the server. Cookies have an expiry time, this allows for HTTP Sessions to expire. The HTTP Session will expire after a predetermined time and a user will need to login again.</p>

<h2 id="setup-a-session">Setup a session:</h2>

<p>To add HTTP Sessions to your ExpressJS Server you need to install the <a href="https://www.npmjs.com/package/express-session">express-session package</a>.</p>

<p>Add configuration like this:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>
<span class="kd">var</span> <span class="nx">session</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'express-session'</span><span class="p">);</span>

<span class="c1">//setup HttpSession middleware</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">session</span><span class="p">({</span>
    <span class="na">secret</span><span class="p">:</span> <span class="s1">'put your secret phrase here please'</span><span class="p">,</span>
    <span class="na">cookie</span><span class="p">:</span> <span class="p">{</span> <span class="na">maxAge</span><span class="p">:</span> <span class="mi">60000</span> <span class="p">}</span>
<span class="p">}));</span>

<span class="c1">//in a route Now</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"/my-route"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">){</span>
    <span class="c1">// req.session - will be defined now...</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">req</span><span class="p">.</span><span class="nx">session</span><span class="p">.</span><span class="nx">user</span><span class="p">){</span>
        <span class="c1">//set a session value from a form variable</span>
        <span class="nx">req</span><span class="p">.</span><span class="nx">session</span><span class="p">.</span><span class="nx">user</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">username</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span>
</code></pre>
</div>

    </main>

    <footer class="site-footer">
  <nav class="main-nav" id="menu">
    <ul>
          <li>
            <a href="/steps/http_sessions.html" class = "active">Http Sessions</a>
          </li>
          <li>
              <a href="/steps/middleware.html" >Middleware</a>
              <ul>
                <li><a href="/steps/middleware_global.html" >Global middleware</a></li>
                <li><a href="/steps/middleware_route_specific.html" >Route specific middleware</a></li>
            </ul>
          </li>
          <li>
            <a href="/steps/implementing_auth.html" >Implementing auth</a>
          </li>
          <li>
            <a href="/steps/resources.html" >Resources</a>
          </li>

    </ul>
  </nav>
</footer>


  </body>

</html>
